{% load static %} {% block content %}
<div class="result-chart-category">
  <div class="result-category-title">카테고리</div>
  <div class="result-category-box">
    <div
      class="result-category-name"
      id="mbtiToggle"
      onclick="toggleRotation()"
    >
      <img
        src="{% static 'img/icon/chevron_up.png'%}"
        style="width: 30px"
        class="chevron"
      />
      MBTI
    </div>
  </div>
  <div id="EImbti-chart"></div>
</div>

<script>
  var options = {
    series: [
      {
        name: "민초파",
        data: [47, 68],
      },
      {
        name: "반민초파",
        data: [53, 32],
      },
    ],
    chart: {
      type: "bar",
      height: 350,
      stacked: true,
      stackType: "100%",
    },
    plotOptions: {
      bar: {
        horizontal: true,
      },
    },
    stroke: {
      width: 1,
      colors: ["#fff"],
    },
    title: {
      text: "E vs I Chart",
    },
    xaxis: {
      categories: ["E", "I"],
    },
    tooltip: {
      y: {
        formatter: function (val) {
          return val + "K";
        },
      },
    },
    fill: {
      opacity: 1,
    },
    legend: {
      position: "top",
      horizontalAlign: "left",
      offsetX: 40,
    },
  };

  // Wait for the document to load
  document.addEventListener("DOMContentLoaded", function (event) {
    var chart = new ApexCharts(
      document.querySelector("#EImbti-chart"),
      options
    );
    chart.render();
  });
</script>
<script>
  let isRotated = false;

  function toggleRotation() {
    const chevron = document.querySelector(".chevron");

    if (isRotated) {
      chevron.style.transform = "rotate(0deg)";
    } else {
      chevron.style.transform = "rotate(180deg)";
    }

    isRotated = !isRotated;
  }
</script>

{% endblock %}
