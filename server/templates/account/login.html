{% load static %}
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily vs login</title>
    <link rel="stylesheet" href="{%static 'css/style.css'%}" />
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}" />
    <style>
      #modal.modal-overlay {
        width: 100%;
        height: 100%;
        position: fixed;
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        backdrop-filter: blur(1.5px);
        -webkit-backdrop-filter: blur(1.5px);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.18);
      }
      #modal .modal-window {
        background: rgba(69, 139, 197, 0.70);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        backdrop-filter: blur(13.5px);
        -webkit-backdrop-filter: blur(13.5px);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        max-width: 300px; /* 수정된 부분 */
        position: relative;
        padding: 10px;
      }
      #modal .title {
        padding-left: 10px;
        display: inline;
        text-shadow: 1px 1px 2px gray;
        color: white;
      }
      #modal .title h2 {
        display: inline;
      }
      #modal .close-area {
        display: inline;
        float: right;
        padding-right: 10px;
        cursor: pointer;
        text-shadow: 1px 1px 2px gray;
        color: white;
      }
      #modal .content {
        margin-top: 20px;
        padding: 0px 10px;
        text-shadow: 1px 1px 2px gray;
        color: white;
      }
      #modal .title {
        display: flex;
        align-items: center; /* 추가된 부분 */
        justify-content: center; /* 추가된 부분 */
      }
      #modal .title h2 {
        margin: 0; /* 기본 마진을 제거 */
      }
      
    </style>
  </head>
  <body>
    <div class="login-box">
      <div class="login-nav">
        <span
          ><a href="/"
            ><img
              src="{% static 'img/icon/left_page.png'%}"
              style="width: 30px" /></a
        ></span>
        <div class="login-name">로그인</div>
      </div>
      <form action="{% url 'account:login' %}" method="post">
        {% csrf_token %}
        {% if wrong_password %}
            <!-- <div class="alert alert-danger" role="alert">
                The password you entered is incorrect. Please try again.
            </div> -->
            
            <div id="modal" class="modal-overlay">
              <div class="modal-window">
                  <div class="title">
                      <h2>로그인 안내</h2>
                  </div>
                  <div class="close-area">X</div>
                  <div class="content">
                      <p>회원 아이디 또는 비밀번호가 일치하지 않습니다</p>
                  </div>
              </div>
          </div>
        {% endif %}
        <!-- form -->
        <div class="login-container">
          <form method="post" action="/login/" style="width: 400px">
            {% csrf_token %}
            <img src="{% static 'img/Logo.png'%}" style="width: 250px" />
            <div class="input-container">
              <input
                type="text"
                name="username"
                id="username"
                placeholder="아이디"
              />
              <input
                type="password"
                name="password"
                id="password"
                placeholder="비밀번호"
              />
              <button type="submit" class="login-btn">로그인</button>
            </div>
          </form>
        </div>
      </form>
      <div class="login__signup">
        아직 계정이 없으신가요?
        <a href="{% url 'account:signup' %}">회원가입</a>
        <a href="{% url 'account:password_reset_input' %}">비밀번호 찾기</a>
      </div>
    </div>
    <script>
      const loremIpsum = document.getElementById("lorem-ipsum")
      fetch("https://baconipsum.com/api/?type=all-meat&paras=200&format=html")
          .then(response => response.text())
          .then(result => loremIpsum.innerHTML = result)
      const closeBtn = modal.querySelector(".close-area")
      closeBtn.addEventListener("click", e => {
          modal.style.display = "none"
      })
      modal.addEventListener("click", e => {
        const evTarget = e.target
        if(evTarget.classList.contains("modal-overlay")) {
            modal.style.display = "none"
        }
      })
      window.addEventListener("keyup", e => {
        if(modal.style.display === "flex" && e.key === "Escape") {
            modal.style.display = "none"
        }
      })
    </script>
  </body>
</html>